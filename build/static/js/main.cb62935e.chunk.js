(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{199:function(e,t,a){e.exports=a.p+"static/media/undraw_Hamburger_8ge6.b2a89532.svg"},211:function(e,t,a){e.exports=a(372)},237:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),l=a(40),i=a(177),u=a(20),m=a(179),s=a(74),d=a(4),p=a(180),f=a.n(p),E=function(){var e=localStorage.getItem("Token");return f.a.create({baseURL:"https://food-truck-trackr-api.herokuapp.com",headers:{authorization:"Bearer ".concat(e)}})},g=function(e){return function(t){t({type:"FETCHING_OPERATORS_START"}),E().get("/api/operators/".concat(e)).then((function(e){t({type:"FETCHING_OPERATORS_SUCCESS",payload:e.data})})).catch((function(e){console.log("error",e),t({type:"FETCHING_OPERATORS_ERROR",payload:e.message})}))}},b=function(e,t){return function(a){E().put("/api/trucks/".concat(e),t).then((function(e){console.log("SR: UpdateTruckForm.js: submit sucess: res: ",e.data),a({type:"UPDATE_TRUCK",payload:e.data})})).catch((function(e){console.error("SR: UpdateTruckForm.js: submit failed: err ",e.message)}))}},y={isFetching:!1,error:"",userInfo:{dinerId:10001,username:"CrazyHorseSouthDekota",email:"Crazy.Horse@SouthDekota.com",currentLocation:"SD",favoriteTrucks:[]},trucks:[]},O={isFetching:!1,error:"",operatorInfo:{operatorId:localStorage.getItem("operatorId"),username:"",email:"",trucksOwned:[{customerRatings:[2,3,4]}]}},T=Object(l.combineReducers)({diner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_TRUCKS_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCHING_TRUCKS_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,trucks:t.payload,error:""});case"FETCHING_TRUCKS_ERROR":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload});case"FETCHING_DINER_INFO_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCHING_DINER_INFO_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,userInfo:t.payload,error:""});case"FETCHING_DINER_INFO_ERROR":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload});case"SET_FAVORITE_TRUCK_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{userInfo:Object(d.a)(Object(d.a)({},e.userInfo),{},{favoriteTrucks:Object(s.a)(t.payload)})});case"SET_FAVORITE_TRUCK_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.payload});case"ADD_TRUCK_RATING_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{trucks:e.trucks.map((function(e){var a=e;if(t.payload.truckId===e.id){var n=0;a.customerRatings=t.payload.data.map((function(e){return n+=e.customerRating,e.customerRating})),a.customerRatingsAvg=Math.round(n/a.customerRatings.length)}return a}))});case"ADD_TRUCK_RATING_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.payload});case"ADD_MENU_RATING_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{trucks:e.trucks.map((function(e){var a=e;return t.payload.truckId===e.id&&(a.menu=e.menu.map((function(e){var a=e;if(t.payload.menuItemId===e.id){var n=0;a.customerRatings=t.payload.data.map((function(e){return n+=e.customerRating,e.customerRating})),a.customerRatingsAvg=Math.round(n/a.customerRatings.length)}return a}))),a}))});case"ADD_MENU_RATING_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.payload});default:return e}},operator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_OPERATORS_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"FETCHING_OPERATORS_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,operatorInfo:t.payload,error:""});case"FETCHING_OPERATORS_ERROR":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!1,error:t.payload});case"ADD_TRUCK":return Object(d.a)(Object(d.a)({},e),{},{operatorInfo:Object(d.a)(Object(d.a)({},e.operatorId),{},{trucksOwned:[].concat(Object(s.a)(e.operatorInfo.trucksOwned),[t.payload])})});case"UPDATE_TRUCK":return Object(d.a)(Object(d.a)({},e),{},{operatorInfo:Object(d.a)(Object(d.a)({},e.operatorInfo),{},{trucksOwned:e.operatorInfo.trucksOwned.map((function(e){return e.id===t.payload.id?t.payload:e}))})});case"REMOVE_TRUCK":return Object(d.a)(Object(d.a)({},e),{},{operatorInfo:Object(d.a)(Object(d.a)({},e.operatorInfo),{},{trucksOwned:e.operatorInfo.trucksOwned.filter((function(e){return e.id!==t.payload}))})});case"ADD_MENUITEM":return Object(d.a)(Object(d.a)({},e),{},{operatorInfo:Object(d.a)(Object(d.a)({},e.operatorInfo),{},{trucksOwned:e.operatorInfo.trucksOwned.map((function(e){var a=e;return e.id===t.payload.truckId&&(a.menu=[].concat(Object(s.a)(a.menu),[t.payload.data])),a}))})});case"REMOVE_MENUITEM":return Object(d.a)(Object(d.a)({},e),{},{operatorInfo:Object(d.a)(Object(d.a)({},e.operatorInfo),{},{trucksOwned:e.operatorInfo.trucksOwned.map((function(e){var a=e;return e.id===t.payload.truckId&&(a.menu=e.menu.filter((function(e){return e.id!==t.payload.menuItemId}))),a}))})});default:return e}}}),h=(a(237),a(22)),k=a(14),I=a(13),j=a(10),R=a(29),v=(a(103),a(381)),w=a(393),C=a(395),S=a(396),_=a(382),D=a(386),F=a(374),A=R.a().shape({username:R.c().required("Username is a required field"),password:R.c().required("Password is a required field")}),x=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(),o=Object(j.a)(c,2),l=(o[0],o[1]),i=Object(k.g)().push,u=Object(n.useState)({username:"",password:""}),m=Object(j.a)(u,2),s=m[0],p=m[1],f=Object(n.useState)({username:"",password:""}),g=Object(j.a)(f,2),b=g[0],y=g[1],O=Object(n.useState)(!0),T=Object(j.a)(O,2),x=T[0],N=T[1];Object(n.useEffect)((function(){A.isValid(s).then((function(e){N(!e)}))}),[s]);var M=function(e){var t;e.persist(),p(Object(d.a)(Object(d.a)({},s),{},Object(I.a)({},e.target.name,e.target.value))),t=e,R.b(A,t.target.name).validate(t.target.value).then((function(e){y(Object(d.a)(Object(d.a)({},b),{},Object(I.a)({},t.target.name,"")))})).catch((function(e){y(Object(d.a)(Object(d.a)({},b),{},Object(I.a)({},t.target.name,e.errors[0])))}))};return r.a.createElement(v.a,{textalign:"center",style:{marginTop:"10rem"}},r.a.createElement(w.a,{size:"medium",textAlign:"center",style:{marginBottom:"2rem"}},"Welcome to Food Truck TrackR"),r.a.createElement(C.a,{placeholder:!0},r.a.createElement(S.a,{columns:2,stackable:!0},r.a.createElement(_.a,{vertical:!0},"Or"),r.a.createElement(S.a.Column,null,r.a.createElement(D.a,{onSubmit:function(e){e.preventDefault(),E().post("/api/auth/login",{username:s.username,password:s.password}).then((function(e){console.log("submitted",e),"operator"===e.data.type?(l(e.data.operator.operatorId),localStorage.setItem("operatorId",e.data.operator.operatorId),localStorage.setItem("Token",e.data.token),i("/operator/dashboard")):"diner"===e.data.type&&(a(e.data.diner.dinerId),localStorage.setItem("dinerId",e.data.diner.dinerId),localStorage.setItem("Token",e.data.token),console.log(e.data.token),i("/home"))})).catch((function(e){return console.log(e)}))}},r.a.createElement(D.a.Input,{icon:"user",iconPosition:"left",label:"Username",placeholder:"Username",name:"username",value:s.username,onChange:M}),b.username.length>0?r.a.createElement("p",{className:"error"},b.username):null,r.a.createElement(D.a.Input,{icon:"lock",iconPosition:"left",label:"Password",type:"password",name:"password",value:s.password,onChange:M}),b.password.length>0?r.a.createElement("p",{className:"error"},b.password):null,r.a.createElement(F.a,{type:"submit",disabled:x,content:"Login",primary:!0}))),r.a.createElement(S.a.Column,{verticalAlign:"middle"},r.a.createElement(h.b,{to:"/register"},r.a.createElement(F.a,{content:"Sign up",icon:"signup",size:"big",onClick:function(){return i("/register")}}))))))},N=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null))},M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null))},U=a(51),L=[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#cba9a9"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],P=a(390),z=a(200),W=a(39),G={width:"100%",height:"100%",marginTop:"-1rem"};var H=Object(U.GoogleApiWrapper)({apiKey:"AIzaSyAKgYAy4mmkRtFlnYenEWKjuZPZ2c-JbMs"})((function(e){var t=Object(n.useRef)(),a=Object(n.useState)(new e.google.maps.DirectionsRenderer({suppressMarkers:!0})),c=Object(j.a)(a,1)[0],o=Object(n.useState)(new e.google.maps.DirectionsService),l=Object(j.a)(o,1)[0],i=Object(n.useState)(null),u=Object(j.a)(i,2),m=(u[0],u[1]),s=Object(n.useState)(!1),p=Object(j.a)(s,2),f=p[0],E=p[1],g=function(t){e.setInfoWindow({visible:!0,position:t.position,currentTruck:t.data_truck})};return Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.watchPosition((function(t){e.setMyLocation({lat:t.coords.latitude,lng:t.coords.longitude}),console.log(t),""===e.myLocation||f||(e.setMapCenter(e.myLocation),E(!0))}),(function(){console.log("error position")}))})),Object(n.useEffect)((function(){if(null!==e.destination){var t={origin:e.myLocation,destination:e.destination.location,travelMode:"DRIVING"};console.log(t),l.route(t,(function(e,t){"OK"===t?c.setDirections(e):window.alert("Directions request failed due to "+t)}))}else c.setDirections({routes:[]})}),[e.destination]),r.a.createElement(U.Map,{google:e.google,disableDefaultUI:!0,zoom:14,style:G,styles:L,center:e.mapCenter,onReady:function(e,t){m(t),c.setMap(t)}},r.a.createElement(U.Marker,{position:e.myLocation,icon:{path:e.google.maps.SymbolPath.CIRCLE,scale:8,strokeColor:"#00f",strokeWeight:1,fillColor:"#00f",fillOpacity:.7}}),r.a.createElement(U.Circle,{ref:t,radius:1609.34*e.milesRadius,center:e.myLocation,strokeColor:"#00f",strokeOpacity:1,strokeWeight:1,fillColor:"#00f",fillOpacity:.2}),e.trucks.map((function(e,t){var a=e.currentLocation.split(", ");if(e.departureTime>Date.now())return r.a.createElement(U.Marker,{key:t,name:"current Location",position:{lat:a[0],lng:a[1]},data_truck:e,onClick:g})})),r.a.createElement(U.InfoWindow,{visible:e.infoWindow.visible,position:e.infoWindow.position,style:{top:-60},onClose:function(){e.setInfoWindow(Object(d.a)(Object(d.a)({},e.infoWindow),{},{visible:!1}))}},r.a.createElement(S.a,{columns:1},r.a.createElement(S.a.Column,null,r.a.createElement(P.a,null,r.a.createElement(z.a,{src:e.infoWindow.currentTruck.imageOfTruck,alt:"".concat(e.infoWindow.currentTruck.cuisineType," food truck"),style:{width:290,height:277}}),r.a.createElement(P.a.Content,null,r.a.createElement(P.a.Header,null,e.infoWindow.currentTruck.name),r.a.createElement(P.a.Meta,null,"Cuisine: ",e.infoWindow.currentTruck.cuisineType),r.a.createElement(P.a.Description,null,"In Location Until:"," ",new Date(e.infoWindow.currentTruck.departureTime).toLocaleTimeString())),r.a.createElement(P.a.Content,{extra:!0},r.a.createElement(W.a,{name:"star"}),"Average Rating:"," ","".concat(e.infoWindow.currentTruck.customerRatingsAvg," (").concat(e.infoWindow.currentTruck.customerRatings.length,")")))))))})),K=a(384),B=a(388),V={display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"space-between",borderLeft:"none",borderRight:"none",borderBottom:"none",boxShadow:"none",marginBottom:-10,paddingLeft:5,paddingRight:5},q={width:60,height:60};var J=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{placeholder:"Search...",style:{width:"100%"},onChange:function(t){e.setSearchValue(t.target.value)},value:e.searchValue}),r.a.createElement(v.a,{style:{overflow:"auto",flexGrow:"1",marginTop:10}},r.a.createElement(B.a,{selection:!0,verticalAlign:"middle",size:"large"},e.trucks.filter((function(t){return t.name.includes(e.searchValue)||t.cuisineType.includes(e.searchValue)})).map((function(t,a){var n=t.currentLocation.split(", ");return r.a.createElement(B.a.Item,{key:a,onClick:function(a){t.departureTime>Date.now()&&(e.setInfoWindow({visible:!0,position:{lat:n[0],lng:n[1]},currentTruck:t}),e.RecenterMap({lat:n[0],lng:n[1]}))}},r.a.createElement(B.a.Content,{floated:"right"},t.departureTime>Date.now()?r.a.createElement(F.a,{icon:!0,color:"green",onClick:function(a){a.stopPropagation(),e.setDestination({location:{lat:parseFloat(n[0]),lng:parseFloat(n[1])},truckName:t.truckName})},size:"small"},r.a.createElement(W.a,{name:"location arrow"})):null),r.a.createElement(z.a,{src:t.imageOfTruck,style:q}),r.a.createElement(B.a.Content,null,r.a.createElement(B.a.Header,null,t.name),r.a.createElement(w.a,{as:"h5",disabled:!0},t.cuisineType),r.a.createElement(w.a,{as:"h5",disabled:!0},t.departureTime>Date.now()?"".concat(n[2],", ").concat(n[3]):"offline")))})))),r.a.createElement(C.a,{style:V},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10}},r.a.createElement(w.a,{as:"h5",style:{margin:0}},"Search Radius: ",e.milesRadius," Miles"),r.a.createElement("input",{type:"range",min:"1",max:"10",onChange:e.handleMilesRadiusChange,value:e.milesRadius})),r.a.createElement(F.a,{onClick:function(){e.RecenterMap(e.myLocation)},primary:!0},"Go to My Location")))},Y=a(398),Z={marginTop:"10px",marginBottom:"0px"},$={boxShadow:"none",borderRight:"none",borderTop:"none",borderLeft:"none",margin:0,padding:5,display:"flex",justifyContent:"space-between"};var Q=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{style:$},r.a.createElement(F.a,{icon:!0,onClick:function(){e.setInfoWindow(Object(d.a)(Object(d.a)({},e.infoWindow),{},{visible:!1}))}},r.a.createElement(W.a,{name:"arrow left"})),void 0===e.userInfo.favoriteTrucks?null:0===e.userInfo.favoriteTrucks.filter((function(t){return t.truckId===e.infoWindow.currentTruck.id})).length?r.a.createElement(F.a,{basic:!0,color:"red",icon:!0,onClick:function(){e.addFavoriteTruck(e.userInfo.dinerId,e.infoWindow.currentTruck.id)}},r.a.createElement(W.a,{name:"heart outline"})):r.a.createElement(F.a,{color:"red",icon:!0,onClick:function(){console.log(e.userInfo.dinerId,e.infoWindow.currentTruck.id),e.deleteFavoriteTruck(e.userInfo.dinerId,e.infoWindow.currentTruck.id)}},r.a.createElement(W.a,{name:"heart"}))),r.a.createElement(w.a,{as:"h2",textAlign:"center",style:{}},r.a.createElement(w.a.Content,null,e.infoWindow.currentTruck.name,r.a.createElement(w.a.Subheader,null,"Cuisine: ",e.infoWindow.currentTruck.cuisineType))),r.a.createElement(Y.a,{icon:"star",defaultRating:0,maxRating:5,size:"huge",style:{width:190,margin:"0 auto"},onRate:function(t,a){e.addTruckRating(e.infoWindow.currentTruck.id,e.userInfo.dinerId,a.rating)}}),r.a.createElement(_.a,{clearing:!0}),r.a.createElement(w.a,{as:"h3",textAlign:"center",style:Z},r.a.createElement(w.a.Content,null,"Menu")),r.a.createElement("div",{style:{overflow:"auto",maxHeight:350,paddingRight:10,flexGrow:1}},r.a.createElement(B.a,{divided:!0,verticalAlign:"middle",size:"large"},e.infoWindow.currentTruck.menu.map((function(t,a){return r.a.createElement(B.a.Item,{key:a,style:{paddingTop:15}},r.a.createElement(z.a,{src:t.itemPhotos[0],style:{width:50,height:50}}),r.a.createElement(B.a.Content,{style:{width:250}},r.a.createElement(B.a.Header,{style:{position:"relative"}},t.itemName,r.a.createElement("span",{style:{position:"absolute",right:0}},"$",t.itemPrice,".00")),r.a.createElement(B.a.Description,null,t.itemDescription)),r.a.createElement(B.a.Content,{floated:"left",style:{paddingTop:5,display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},r.a.createElement(Y.a,{rating:t.customerRatingsAvg,maxRating:5,disabled:!0}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:".9em"}},"Rate it:",r.a.createElement(Y.a,{defaultRating:t.customerRatingsAvg,maxRating:5,onRate:function(a,n){e.addMenuRating(e.infoWindow.currentTruck.id,t.id,e.userInfo.dinerId,n.rating)}}))))})))))},X={position:"absolute",top:70,left:10,width:350,bottom:10,zIndex:100,display:"flex",flexDirection:"column"};var ee=function(e){var t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],o=a[1];return r.a.createElement(C.a,{style:X},e.infoWindow.visible?r.a.createElement(Q,{infoWindow:e.infoWindow,setInfoWindow:e.setInfoWindow,addFavoriteTruck:e.addFavoriteTruck,deleteFavoriteTruck:e.deleteFavoriteTruck,addTruckRating:e.addTruckRating,addMenuRating:e.addMenuRating,userInfo:e.userInfo}):r.a.createElement(J,{handleMilesRadiusChange:function(t){e.setMilesRadius(t.target.value)},trucks:e.trucks,setDestination:e.setDestination,setInfoWindow:e.setInfoWindow,searchValue:c,setSearchValue:o,RecenterMap:e.RecenterMap,myLocation:e.myLocation,milesRadius:e.milesRadius}))},te={position:"absolute",zIndex:1e3,right:10,bottom:10,display:"flex",alignItems:"center"};var ae=function(e){return null!==e.destination?r.a.createElement(C.a,{style:te},r.a.createElement(W.a,{name:"location arrow",size:"big"}),r.a.createElement("div",null,r.a.createElement(w.a,{as:"h3",style:{marginLeft:20,marginRight:20}},"Right now you are following a Route",r.a.createElement(w.a.Subheader,null,"Route from Current Location to ",e.destination.truckName))),r.a.createElement(F.a,{floated:"right",color:"red",size:"big",onClick:function(){e.setDestination(null),e.RecenterMap(e.myLocation)}},"Clear Route")):null},ne=a(392),re=function(){var e=Object(k.g)().push;return r.a.createElement(h.a,null,r.a.createElement(ne.a,{inverted:!0,size:"massive",style:{borderRadius:0,position:"fixed",top:"-1rem",left:0,right:0,height:"auto",zIndex:1e3}},r.a.createElement(ne.a.Item,{header:!0},"Food Truck TrackR"),r.a.createElement(ne.a.Menu,{position:"right"},r.a.createElement(ne.a.Item,null,r.a.createElement(h.b,{to:{pathname:"www.google.com"},target:"_blank"},"Marketing Page")),r.a.createElement(ne.a.Item,null,r.a.createElement(W.a,{name:"setting"})),r.a.createElement(ne.a.Item,null,r.a.createElement(W.a,{name:"log out",onClick:function(){localStorage.clear(),e("/")},style:{cursor:"pointer"}})))))},ce=Object(u.b)((function(e){return{userInfo:e.diner.userInfo,trucks:e.diner.trucks}}),{fetchTruckData:function(){return function(e){e({type:"FETCHING_TRUCKS_START"}),E().get("/api/trucks").then((function(t){e({type:"FETCHING_TRUCKS_SUCCESS",payload:t.data})})).catch((function(t){console.log("error",t),e({type:"FETCHING_TRUCKS_ERROR",payload:t.message})}))}},fetchDinerInfo:function(e){return function(t){t({type:"FETCHING_DINER_INFO_START"}),E().get("/api/diners/".concat(e)).then((function(e){console.log(e),t({type:"FETCHING_DINER_INFO_SUCCESS",payload:e.data})})).catch((function(e){console.log(e),t({type:"FETCHING_DINER_INFO_ERROR",payload:e.data})}))}},addFavoriteTruck:function(e,t){return function(a){E().post("/api/diners/".concat(e,"/favoriteTrucks"),{truckId:t}).then((function(e){console.log("AC: actions/index.js: settingFavoriteTruck: axios.then: ",e),a({type:"SET_FAVORITE_TRUCK_SUCCESS",payload:e.data})})).catch((function(e){console.log("error",e),a({type:"SET_FAVORITE_TRUCK_ERROR",payload:e.message})}))}},deleteFavoriteTruck:function(e,t){return function(a){console.log(t),E().delete("/api/diners/".concat(e,"/favoriteTrucks"),{truckId:t}).then((function(e){console.log("AC: actions/index.js: settingFavoriteTruck: axios.then: ",e),a({type:"SET_FAVORITE_TRUCK_SUCCESS",payload:e.data})})).catch((function(e){console.log("error",e),a({type:"SET_FAVORITE_TRUCK_ERROR",payload:e.message})}))}},addTruckRating:function(e,t,a){return function(n){E().post("/api/trucks/".concat(e,"/customerRatings/").concat(t),{customerRating:a}).then((function(t){console.log(t),n({type:"ADD_TRUCK_RATING_SUCCESS",payload:{data:t.data,truckId:e}})})).catch((function(e){n({type:"ADD_TRUCK_RATING_ERROR",payload:e.message})}))}},addMenuRating:function(e,t,a,n){return function(r){E().post("/api/trucks/".concat(e,"/menu/").concat(t,"/customerRatings/").concat(a),{customerRating:n}).then((function(a){console.log(a),r({type:"ADD_MENU_RATING_SUCCESS",payload:{data:a.data,truckId:e,menuItemId:t}})})).catch((function(e){r({type:"ADD_MENU_RATING_ERROR",payload:e.message})}))}}})((function(e){var t=Object(n.useState)({visible:!1,position:{},currentTruck:{truckName:"The Big supersized ",imageOfTruck:"https://static.wixstatic.com/media/bb1bd6_485d9a16b9fb4bdf82a580021d224fea~mv2.png/v1/fill/w_1000,h_594,al_c,usm_0.66_1.00_0.01/bb1bd6_485d9a16b9fb4bdf82a580021d224fea~mv2.png",cuisineType:"Latin Cuisine",customerRatings:[3,4,2,4],customerRatingAvg:4,menu:[],currentLocation:""}}),a=Object(j.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),i=Object(j.a)(l,2),u=i[0],m=i[1],s=Object(n.useState)(1),p=Object(j.a)(s,2),f=p[0],E=p[1],g=Object(n.useState)({}),b=Object(j.a)(g,2),y=b[0],O=b[1],T=Object(n.useState)(""),h=Object(j.a)(T,2),k=h[0],I=h[1];Object(n.useEffect)((function(){e.fetchTruckData(),e.fetchDinerInfo(localStorage.getItem("dinerId"))}),[]),Object(n.useEffect)((function(){if(c.visible){var t=e.trucks.filter((function(e){return e.id===c.currentTruck.id}));o(Object(d.a)(Object(d.a)({},c),{},{currentTruck:t[0]})),console.log(c)}}),[e.trucks]);var R=function(e){O(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null),r.a.createElement(ae,{destination:u,setDestination:m,RecenterMap:R,myLocation:k}),r.a.createElement(ee,{infoWindow:c,setInfoWindow:o,destination:u,setDestination:m,trucks:e.trucks,userInfo:e.userInfo,milesRadius:f,setMilesRadius:E,RecenterMap:R,myLocation:k,addFavoriteTruck:e.addFavoriteTruck,deleteFavoriteTruck:e.deleteFavoriteTruck,addTruckRating:e.addTruckRating,addMenuRating:e.addMenuRating}),r.a.createElement(H,{infoWindow:c,setInfoWindow:o,destination:u,trucks:e.trucks,userInfo:e.userInfo,milesRadius:f,mapCenter:y,setMapCenter:O,myLocation:k,setMyLocation:I}))})),oe=a(197),le=a.n(oe);var ie=function(e){return r.a.createElement(le.a,{apiKey:"AIzaSyAKgYAy4mmkRtFlnYenEWKjuZPZ2c-JbMs",onPlaceSelected:function(t){e.handlePlaceSelector("".concat(t.geometry.location.lat(),", ").concat(t.geometry.location.lng(),", ").concat(t.address_components[2].long_name,", ").concat(t.address_components[4].short_name)),console.log(t)},types:["address"]})},ue=a(389),me=Object(u.b)(null,{addTruck:function(e){return function(t){E().post("/api/trucks",e).then((function(e){console.log(e.data),t({type:"ADD_TRUCK",payload:e.data})})).catch((function(e){console.error(e)}))}},fetchOperatorData:g})((function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({operatorId:e.operatorId,name:"",imageOfTruck:"",cuisineType:"",currentLocation:""}),i=Object(j.a)(l,2),u=i[0],m=i[1],s=function(e){m(Object(d.a)(Object(d.a)({},u),{},Object(I.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{onClose:function(){o(!1),m({name:"",imageOfTruck:"",cuisineType:"",currentLocation:""})},onOpen:function(){return o(!0)},open:c,trigger:r.a.createElement(F.a,{color:"orange",style:{marginTop:".5rem",marginBottom:".75rem"}},r.a.createElement(W.a,{name:"add"}),"Add Food Truck")},r.a.createElement(ue.a.Header,null,"Add Food Truck"),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Description,null,r.a.createElement(D.a,{onSubmit:function(t){t.preventDefault(),e.addTruck(u),m({name:"",imageOfTruck:"",cuisineType:"",currentLocation:""}),o(!1)}},r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Truck Name"),r.a.createElement("input",{type:"text",name:"name",placeholder:"Name of Truck",value:u.name,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Image URL"),r.a.createElement("input",{type:"text",name:"imageOfTruck",placeholder:"Enter Image URL",value:u.imageOfTruck,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Cuisine"),r.a.createElement("input",{type:"text",name:"cuisineType",placeholder:"ex. Vietnamese",value:u.cuisineType,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Location"),r.a.createElement(ie,{handlePlaceSelector:function(e){m(Object(d.a)(Object(d.a)({},u),{},{currentLocation:e}))}})),r.a.createElement(F.a,{type:"submit"},r.a.createElement(W.a,{name:"add"})," Add Truck"))))))})),se=a(383),de=Object(u.b)(null,{updateTruck:b})((function(e){var t=Object(n.useState)((function(){return!(e.truck.departureTime<Date.now())})),a=Object(j.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),u=i[0],m=i[1],s=Object(n.useState)({departureTime:"",location:""}),p=Object(j.a)(s,2),f=p[0],E=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{onOpen:function(){return o(!0)},open:u,size:"mini"},r.a.createElement(ue.a.Header,null,"Go Online"),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Description,null,r.a.createElement(D.a,{onSubmit:function(t){t.preventDefault();var a=new Date;a.setHours(a.getHours()+parseInt(f.departureTime)),e.updateTruck(e.truck.id,{currentLocation:f.location,departureTime:Date.parse(a)}),m(!1)}},r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Amount of Hours"),r.a.createElement("input",{name:"departureTime",placeholder:"ex. 2",value:f.departureTime,onChange:function(e){E(Object(d.a)(Object(d.a)({},f),{},Object(I.a)({},e.target.name,e.target.value)))}})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Location"),r.a.createElement(ie,{handlePlaceSelector:function(e){E(Object(d.a)(Object(d.a)({},f),{},{location:e}))}})),r.a.createElement(F.a,{type:"submit",color:"green"},r.a.createElement(W.a,{name:"world"})," Go Online"))))),r.a.createElement(C.a,{vertical:!0,onClick:function(){e.setShowTruckById(e.truck.id)},style:{cursor:"pointer",margin:"0 1rem"}},r.a.createElement(w.a,{size:"large"},e.truck.name),r.a.createElement("p",null,r.a.createElement(W.a,{name:"map pin",size:"large",color:"red"}),void 0!==e.truck.currentLocation?e.truck.departureTime>Date.now()?"".concat(e.truck.currentLocation.split(", ")[2],", ").concat(e.truck.currentLocation.split(", ")[3]):"offline":"Offline"),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(W.a,{name:"food",size:"large",color:"yellow"}),e.truck.cuisineType),r.a.createElement(se.a,{slider:!0,checked:c,label:"Online",onChange:function(){o(!c),c?e.updateTruck(e.truck.id,{currentLocation:f.location,departureTime:Date.now()}):m(!0)}}))))})),pe=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{vertical:!0,textAlign:"center"},r.a.createElement(me,{operatorId:e.operatorId})),void 0===e.trucks||0===e.trucks.length?null:r.a.createElement("h3",null,"Food Trucks"),void 0===e.trucks?null:e.trucks.map((function(t){return r.a.createElement("div",{key:t.id},console.log("SR : truck object",t.id),r.a.createElement(de,{setShowTruckById:e.setShowTruckById,truck:t,isOnline:e.isOnline}))})))},fe=Object(u.b)(null,{addMenuItem:function(e,t){return function(a){E().post("/api/trucks/".concat(e,"/menu"),t).then((function(t){a({type:"ADD_MENUITEM",payload:{data:t.data,truckId:e}})})).catch((function(e){console.error(e)}))}}})((function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({itemName:"",itemDescription:"",itemPrice:"",itemPhotos:""}),i=Object(j.a)(l,2),u=i[0],m=i[1],s=function(e){m(Object(d.a)(Object(d.a)({},u),{},Object(I.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{onClose:function(){o(!1),m({itemName:"",itemDescription:"",itemPrice:"",itemPhotos:""})},onOpen:function(){return o(!0)},open:c,trigger:r.a.createElement(F.a,null,r.a.createElement(W.a,{name:"add"}),"Add Menu Item")},r.a.createElement(ue.a.Header,null,"Add Menu Item"),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Description,null,r.a.createElement(D.a,{onSubmit:function(t){t.preventDefault();var a=u.itemPhotos.split(" ");e.addMenuItem(e.truck.id,Object(d.a)(Object(d.a)({},u),{},{itemPhotos:a})),m({itemName:"",itemDescription:"",itemPrice:"",itemPhotos:""}),o(!1)}},r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{name:"itemName",placeholder:"ex. French Fries",value:u.itemName,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{name:"itemDescription",placeholder:"Describe Menu Item",value:u.itemDescription,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Price"),r.a.createElement("input",{name:"itemPrice",type:"number",placeholder:"$0",value:u.itemPrice,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Item Photos"),r.a.createElement("input",{name:"itemPhotos",placeholder:"Enter Image URL's",value:u.itemPhotos,onChange:s})),r.a.createElement(F.a,{type:"submit"},r.a.createElement(W.a,{name:"add"})," Add Item"))))))})),Ee=a(387),ge=Object(u.b)(null,{updateMenuItem:function(e,t,a){return function(n){E().put("/api/trucks/".concat(e,"/menu/").concat(t),a).then((function(e){n({type:"UPDATE_MENUITEM",payload:e.data})})).catch((function(e){console.error(e)}))}},removeMenuItem:function(e,t){return function(a){E().delete("/api/trucks/".concat(e,"/menu/").concat(t)).then((function(n){a({type:"REMOVE_MENUITEM",payload:{truckId:e,menuItemId:t}})})).catch((function(e){return console.error(e.message)}))}},fetchOperatorData:g})((function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(e.menuItem),i=Object(j.a)(l,2),u=i[0],m=i[1],s=function(e){m(Object(d.a)(Object(d.a)({},u),{},Object(I.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Content,null,r.a.createElement(Ee.a.Header,{as:"h3"},e.menuItem.itemName),r.a.createElement(Ee.a.Meta,{as:"h4"},r.a.createElement(W.a,{name:"dollar sign"})," ",e.menuItem.itemPrice," .OO"),r.a.createElement(Ee.a.Description,null,e.menuItem.itemDescription),r.a.createElement(Ee.a.Extra,null,r.a.createElement(F.a.Group,{basic:!0,size:"mini"},r.a.createElement(ue.a,{onClose:function(){return o(!1)},onOpen:function(){return o(!0)},open:c,trigger:r.a.createElement(F.a,null,r.a.createElement(W.a,{name:"pencil"})," Edit")},r.a.createElement(ue.a.Header,null,"Add Menu Item"),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Description,null,r.a.createElement(D.a,{onSubmit:function(t){t.preventDefault();var a=u.itemName,n=u.itemDescription,r=u.itemPrice;e.updateMenuItem(e.truck.id,u.id,{itemName:a,itemDescription:n,itemPrice:r}),o(!1),e.fetchOperatorData(localStorage.getItem("operatorId"))}},r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{name:"itemName",placeholder:"ex. French Fries",value:u.itemName,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{name:"itemDescription",placeholder:"Describe Menu Item",value:u.itemDescription,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Price"),r.a.createElement("input",{name:"itemPrice",type:"number",placeholder:"0.00",value:u.itemPrice,onChange:s})),r.a.createElement(F.a,{type:"submit"},r.a.createElement(W.a,{name:"add"})," Update Item"))))),r.a.createElement(F.a,{onClick:function(){e.removeMenuItem(e.truck.id,u.id)}},r.a.createElement(W.a,{name:"delete"})," Delete")))),r.a.createElement(S.a,{columns:"equal"},r.a.createElement(S.a.Row,{floated:"right"},e.menuItem.itemPhotos.map((function(e){return r.a.createElement(S.a.Column,{key:e},r.a.createElement(Ee.a.Image,{key:e,src:e,size:"small"}))}))))))})),be=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Menu"),r.a.createElement("div",null,r.a.createElement(Ee.a.Group,{divided:!0},e.truck.menu.map((function(t){return r.a.createElement(ge,{key:t.id,menuItem:t,truck:e.truck})})))))},ye=Object(u.b)(null,{fetchOperatorData:g,updateTruck:b,removeTruck:function(e,t){return function(a){E().delete("/api/trucks/".concat(e),t).then((function(t){a({type:"REMOVE_TRUCK",payload:e})})).catch((function(e){return console.error(e.message)}))}}})((function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({id:e.truck.id,operatorId:e.operatorId,name:e.truck.name,imageOfTruck:e.truck.imageOfTruck,cuisineType:e.truck.cuisineType,currentLocation:e.truck.currentLocation}),i=Object(j.a)(l,2),u=i[0],m=i[1],s=function(e){m(Object(d.a)(Object(d.a)({},u),{},Object(I.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(w.a,{size:"large"},e.truck.name,r.a.createElement("br",null),r.a.createElement(F.a.Group,{basic:!0,size:"tiny"},r.a.createElement(ue.a,{onClose:function(){o(!1),m({name:u.name,imageOfTruck:u.imageOfTruck,cuisineType:u.cuisineType,currentLocation:u.currentLocation})},onOpen:function(){return o(!0)},open:c,trigger:r.a.createElement(F.a,null,r.a.createElement(W.a,{name:"pencil"})," Edit")},r.a.createElement(ue.a.Header,null,"Edit Food Truck"),r.a.createElement(ue.a.Content,null,r.a.createElement(ue.a.Description,null,r.a.createElement(D.a,{onSubmit:function(t){t.preventDefault(),e.updateTruck(e.truck.id,u),o(!1)}},r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Truck Name"),r.a.createElement("input",{type:"text",name:"name",placeholder:"Name of Truck",value:u.name,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Image URL"),r.a.createElement("input",{type:"text",name:"imageOfTruck",placeholder:"Enter Image URL",value:u.imageOfTruck,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Cuisine"),r.a.createElement("input",{type:"text",name:"cuisineType",placeholder:"ex. Vietnamese",value:u.cuisineType,onChange:s})),r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Location"),r.a.createElement(ie,{handlePlaceSelector:function(e){m(Object(d.a)(Object(d.a)({},u),{},{currentLocation:e}))}})),r.a.createElement(F.a,{type:"submit"},r.a.createElement(W.a,{name:"add"})," Update Truck"))))),r.a.createElement(F.a,{onClick:function(){e.removeTruck(e.truck.id,u)}},r.a.createElement(W.a,{name:"delete"})," Delete"))),r.a.createElement(P.a,null,r.a.createElement(z.a,{src:e.truck.imageOfTruck,alt:"".concat(e.truck.cuisineType," food truck"),size:"medium"}),r.a.createElement(P.a.Content,null,r.a.createElement(P.a.Header,null),r.a.createElement(P.a.Meta,null,r.a.createElement("span",{className:"date"},r.a.createElement(W.a,{name:"clock"}),e.truck.departureTime)),r.a.createElement(P.a.Description,null,r.a.createElement(W.a,{name:"food",color:"yellow"}),e.truck.cuisineType),r.a.createElement(P.a.Description,null,r.a.createElement(W.a,{name:"map pin",color:"red"}),e.truck.currentLocation)),r.a.createElement(P.a.Content,{extra:!0},"Average Rating:",r.a.createElement("br",null),r.a.createElement(Y.a,{maxRating:5,defaultRating:e.truck.customerRatingsAvg,icon:"star",disabled:!0,size:"huge",style:{marginTop:".75rem"}})))))})),Oe=a(198),Te=a.n(Oe),he=function(e){var t=Object(n.useState)({options:{labels:["5 Stars","4 Stars","3 Stars","2 Stars","1 Star"]},series:[5,6,7,5,4]}),a=Object(j.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){var t=[0,0,0,0,0];e.trucks.filter((function(t){return t.id===e.showTruckById})).forEach((function(e){e.customerRatings.forEach((function(e){t[t.length-e]+=1}))})),o(Object(d.a)(Object(d.a)({},c),{},{series:t}))}),[e.showTruckById]),r.a.createElement(v.a,null,void 0===e.trucks?null:e.trucks.filter((function(t){return t.id===e.showTruckById})).map((function(t){return r.a.createElement(S.a,{key:t.id},r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Column,{computer:6,tablet:16},r.a.createElement(ye,{truck:t,operatorId:e.operatorId})),r.a.createElement(S.a.Column,{computer:10,tablet:16},r.a.createElement(S.a,{columns:"equal"},r.a.createElement(S.a.Column,null,r.a.createElement(Te.a,{type:"donut",options:c.options,series:c.series,width:500}))))),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Column,null,r.a.createElement(C.a,{vertical:!0,textAlign:"right"},r.a.createElement(fe,{truck:t})),r.a.createElement(C.a,{vertical:!0},r.a.createElement(be,{truck:t})))))})))},ke=a(394),Ie=a(385),je=a(391),Re=a(99),ve=a.n(Re),we=Object(u.b)((function(e){return console.log(e.operator.operatorInfo),{operatorInfo:e.operator.operatorInfo,isFetching:e.operator.isFetching,isOnline:e.operator.isOnline}}),{fetchOperatorData:g})((function(e){var t=e.isFetching,a=e.operatorInfo,c=e.fetchOperatorData,o=e.isOnline,l=Object(n.useState)(null),i=Object(j.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){c(localStorage.getItem("operatorId"))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null),r.a.createElement(v.a,{fluid:!0,style:{padding:"2rem",marginTop:60}},t?r.a.createElement("div",null,r.a.createElement(ke.a,{active:!0,inverted:!0,size:"medium"},r.a.createElement(Ie.a,{inverted:!0},"Loading")),r.a.createElement(z.a,{src:"/images/wireframe/short-paragraph.png"})):r.a.createElement(S.a,{columns:2},r.a.createElement(S.a.Column,{computer:4,tablet:6,mobile:16},r.a.createElement(C.a,{raised:!0},r.a.createElement(pe,{operatorId:a.operatorId,showTruckById:u,setShowTruckById:m,trucks:a.trucksOwned,isOnline:o}))),r.a.createElement(S.a.Column,{computer:12,tablet:10,mobile:16},null===u?r.a.createElement(C.a,{basic:!0},0===a.trucksOwned.length?r.a.createElement(je.a,{floating:!0,content:"Add a food truck to get started",info:!0,size:"large"}):r.a.createElement(je.a,{floating:!0,content:"Click on then food truck name to show more details",info:!0,size:"large"}),r.a.createElement(z.a,{src:ve.a,size:"huge",centered:!0,style:{opacity:.4}})):r.a.createElement(he,{operatorId:a.operatorId,showTruckById:u,trucks:a.trucksOwned})))))})),Ce=function(e){for(var t=e.component,a=arguments.length,n=new Array(a>1?a-1:0),c=1;c<a;c++)n[c-1]=arguments[c];return r.a.createElement(k.b,Object.assign({},n,{render:function(){return localStorage.getItem("Token")?r.a.createElement(t,null):r.a.createElement(k.a,{to:"/"})}}))},Se=function(){var e=Object(n.useState)({username:"",email:"",password:"",isDiner:null,isOperator:null}),t=Object(j.a)(e,2),a=t[0],c=t[1],o=Object(k.g)(),l=o.push,i=o.goBack,u=Object(n.useState)(),m=Object(j.a)(u,2),s=(m[0],m[1]),p=Object(n.useState)(),f=Object(j.a)(p,2),g=(f[0],f[1]),b=Object(n.useState)({username:"",email:"",password:""}),y=Object(j.a)(b,2),O=y[0],T=y[1],h=R.a().shape({username:R.c().required("Username is a required field").min(6,"Username must be at least 6 characters"),email:R.c().email().required("Email is a required field"),password:R.c().min(6,"Password must be at least 6 characters").required("Password is a required field")}),C=function(e){e.persist(),c(Object(d.a)(Object(d.a)({},a),{},Object(I.a)({},e.target.name,e.target.value))),function(e){R.b(h,e.target.name).validate(e.target.value).then((function(t){T(Object(d.a)(Object(d.a)({},O),{},Object(I.a)({},e.target.name,"")))})).catch((function(t){T(Object(d.a)(Object(d.a)({},O),{},Object(I.a)({},e.target.name,t.errors[0])))}))}(e)};return r.a.createElement(v.a,{textalign:"center",style:{marginTop:"10rem"}},r.a.createElement(D.a,{onSubmit:function(e){e.preventDefault(),e.persist(),!0===a.isDiner?(console.log("username",a.username,"email",a.email,"password",a.password),E().post("/api/auth/register/diner",{username:a.username,email:a.email,password:a.password}).then((function(e){console.log("New Diner Created",e),E().post("/api/auth/login",{username:a.username,password:a.password}).then((function(e){s(e.data.diner.dinerId),localStorage.setItem("dinerId",e.data.diner.dinerId),localStorage.setItem("Token",e.data.token),l("/home")}))})).catch((function(t){T(Object(d.a)(Object(d.a)({},O),{},Object(I.a)({},e.target.name,t.errors[0])))}))):!0===a.isOperator&&E().post("/api/auth/register/operator",{username:a.username,email:a.email,password:a.password}).then((function(e){console.log("New Operator Created",e),E().post("/api/auth/login",{username:a.username,password:a.password}).then((function(e){g(e.data.operator.operatorId),localStorage.setItem("operatorId",e.data.operator.operatorId),localStorage.setItem("Token",e.data.token),l("/operator/dashboard")}))})).catch((function(t){T(Object(d.a)(Object(d.a)({},O),{},Object(I.a)({},e.target.name,t.errors[0])))}))}},r.a.createElement(w.a,{size:"medium",textAlign:"center",style:{marginBottom:"2rem"}},"Sign Up to Join Food Truck TrackR!"),r.a.createElement(D.a.Field,null,r.a.createElement(F.a.Group,null,r.a.createElement(F.a,{primary:!0,type:"button",name:"diner",onClick:function(){return c(Object(d.a)(Object(d.a)({},a),{},{isDiner:!0,isOperator:!1}))}},"Diner"),r.a.createElement(F.a.Or,{text:"or"}),r.a.createElement(F.a,{color:"orange",type:"button",name:"operator",onClick:function(){return c(Object(d.a)(Object(d.a)({},a),{},{isOperator:!0,isDiner:!1}))}},"Operator"))),r.a.createElement(D.a.Field,null,r.a.createElement(K.a,{size:"small",placeholder:"Username:",name:"username",type:"text",value:a.username,onChange:C}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(K.a,{size:"small",placeholder:"Email:",name:"email",type:"email",value:a.email,onChange:C}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(K.a,{size:"small",placeholder:"Password:",name:"password",type:"password",value:a.password,onChange:C})),r.a.createElement(F.a,{color:"teal",type:"submit"},"Register"),r.a.createElement(F.a,{color:"grey",type:"submit",onClick:function(){return i()}},"Login")))},_e=a(75),De=a(199),Fe=a.n(De),Ae=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{size:"large",style:{position:"fixed",bottom:0,left:0,width:"100vw",height:"auto",textAlign:"center",padding:"1rem 0"}},"Food Truck TrackR. 2020"))},xe=function(){return r.a.createElement(h.a,null,r.a.createElement(ne.a,{inverted:!0,size:"massive",style:{borderRadius:0}},r.a.createElement(ne.a.Item,{header:!0},"Food Truck TrackR"),r.a.createElement(ne.a.Menu,{position:"right"},r.a.createElement(ne.a.Item,null,r.a.createElement(h.b,{to:"/"},"Home")),r.a.createElement(ne.a.Item,null,r.a.createElement(h.b,{to:{pathname:"www.google.com"},target:"_blank"},"Marketing Page")))),r.a.createElement(k.d,null,r.a.createElement(Ce,{exact:!0,path:"/home",component:ce}),r.a.createElement(k.b,{exact:!0,path:"/register",component:Se}),r.a.createElement(k.b,{exact:!0,path:"/diner",component:N}),r.a.createElement(Ce,{exact:!0,path:"/operator/dashboard",component:we}),r.a.createElement(k.b,{exact:!0,path:"/operator",component:M}),r.a.createElement(k.b,{exact:!0,path:"/"},r.a.createElement(C.a,{basic:!0},r.a.createElement(S.a,{columns:2,divided:!0,stackable:!0,textAlign:"center",style:{marginTop:"6vw",marginBottom:"1vw"}},r.a.createElement(S.a.Row,null,r.a.createElement(w.a,{size:"huge",textAlign:"center",style:{marginBottom:"3rem"}},"Food Truck TrackR connects users ",r.a.createElement("br",null),"with their favorite food truck locations in real-time.")),r.a.createElement(S.a.Row,{verticalAlign:"middle"},r.a.createElement(S.a.Column,{width:5},r.a.createElement(z.a,{src:Fe.a,size:"medium",centered:!0}),r.a.createElement(_e.a,{pointing:!0,size:"huge",color:"yellow"},r.a.createElement(h.b,{to:"/diner",style:{opacity:1}},"Diner"))),r.a.createElement(S.a.Column,{width:5},r.a.createElement(z.a,{src:ve.a,size:"medium",centered:!0}),r.a.createElement(_e.a,{pointing:!0,size:"huge",color:"blue"},r.a.createElement(h.b,{to:"/operator",style:{opacity:1}},"Operator")))))))),r.a.createElement(Ae,null))},Ne=Object(l.createStore)(T,Object(i.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));o.a.render(r.a.createElement(u.a,{store:Ne},r.a.createElement(xe,null)),document.getElementById("root"))},99:function(e,t,a){e.exports=a.p+"static/media/undraw_street_food_hm5i.59f7c2c4.svg"}},[[211,1,2]]]);
//# sourceMappingURL=main.cb62935e.chunk.js.map